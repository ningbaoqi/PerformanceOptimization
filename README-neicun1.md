### Android内存管理机制
#### Java对象生命周期 
![image](https://github.com/ningbaoqi/PerformanceOptimization/blob/master/gif/neicun.jpg)

|Java对象生命周期|说明|
|------|------|
|创建阶段(Created)|为对象分配存储控件，构造对象，从超类到子类对static成员进行初始化，类的static成员的初始化在ClassLoader加载该类时进行；超类成员变量按顺序初始化，递归调用超类的构造方法，子类成员变量按顺序初始化，一旦对象被创建，子类构造方法就调用该对象并为某些变量赋值，完成后这个对象的状态就切换到了应用阶段|
|应用阶段(InUse)|对象至少被一个强引用持有，除非在系统中显式的使用了软引用、弱引用、虚引用|
|不可见阶段(Invisible)|处于不可见阶段的对象在虚拟机的对象引用根集合中再也找不到直接或间接的强引用，这些对象一般是所有线程栈中的临时变量，所有已经装载的静态变量或者是对本地代码接口的引用；当一个对象处于不可见阶段时，说明程序本身不再持有该对象的任何强引用，虽然该对象仍然时存在的|
|不可达阶段(Unreachable)|对象处于不可达阶段是指该对象不再被任何强引用持有，回收器发现该对象已经不可达|
|收集阶段(Collected)|当垃圾回收器发现该对象已经处于不可达状态，并且垃圾回收器已经对该对象的内存空间重新分配做好了准备时，对象进入收集阶段，如果该对象已经重写了finalize()方法，则执行该方法的操作|
|终结阶段(Finalized)|当对象执行完finalize()方法后仍然处于不可达状态时，该对象进入终结阶段，在该阶段，等待垃圾回收器回收该对象空间|
|对象空间重新分配阶段(Deallocated)|若垃圾回收器对该对象占用的内存空间进行回收或再分配，则该对象彻底消失，这个阶段称为对象空间重新分配阶段|

#### 内存分配

```
ActivityManager.getMemoryClass()可以用来查询当前应用的Heap size阈值，表明应用的Heap size阈值时多少MB
```
